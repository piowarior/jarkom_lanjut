name: latihan
mgmt:
  network: latihan-mgmt
  ipv4-subnet: 10.10.10.0/24

topology:
  nodes:
    # Routers
    r1:
      kind: linux
      image: frrouting/frr
    r2:
      kind: linux
      image: frrouting/frr
    r3:
      kind: linux
      image: frrouting/frr
    r4:
      kind: linux
      image: frrouting/frr

    # Switches (Linux Bridge Containers)
    s1:
      kind: linux
      image: alpine
      exec:
        - apk add --no-cache bridge
    s2:
      kind: linux
      image: alpine
      exec:
        - apk add --no-cache bridge
    s3:
      kind: linux
      image: alpine
      exec:
        - apk add --no-cache bridge
    s4:
      kind: linux
      image: alpine
      exec:
        - apk add --no-cache bridge

    # PCs
    pc1:
      kind: linux
      image: alpine
    pc2:
      kind: linux
      image: alpine
    pc3:
      kind: linux
      image: alpine
    pc4:
      kind: linux
      image: alpine

  links:
    # Router 1 - Switch 1 - PC1
    - endpoints: ["r1:eth1", "s1:eth1"]
    - endpoints: ["s1:eth2", "pc1:eth1"]

    # Router 2 - Switch 2 - PC2
    - endpoints: ["r2:eth1", "s2:eth1"]
    - endpoints: ["s2:eth2", "pc2:eth1"]

    # Router 3 - Switch 3 - PC3
    - endpoints: ["r3:eth1", "s3:eth1"]
    - endpoints: ["s3:eth2", "pc3:eth1"]

    # Router 4 - Switch 4 - PC4
    - endpoints: ["r4:eth1", "s4:eth1"]
    - endpoints: ["s4:eth2", "pc4:eth1"]

    # Backbone Routers
    - endpoints: ["r1:eth2", "r2:eth2"]
    - endpoints: ["r2:eth3", "r3:eth2"]
    - endpoints: ["r3:eth3", "r4:eth2"]
